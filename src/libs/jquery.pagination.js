jQuery.fn.pagination=function(e,t){return t=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},t||{}),this.each(function(){function n(){return Math.ceil(e/t.items_per_page)}function a(e,n){s=e,r();var a=t.callback(e,i);return a||(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0),a}function r(){i.empty();var e=function(){var e=Math.ceil(t.num_display_entries/2),a=n(),r=a-t.num_display_entries;return[s>e?Math.max(Math.min(s-e,r),0):0,s>e?Math.min(s+e,a):Math.min(t.num_display_entries,a)]}(),r=n(),_=function(e,n){if(e=e<0?0:e<r?e:r-1,n=jQuery.extend({text:e+1,classes:""},n||{}),e==s)var _=jQuery("<span class='current'>"+n.text+"</span>");else _=jQuery("<a>"+n.text+"</a>").bind("click",function(e){return function(t){return a(e,t)}}(e)).attr("href",t.link_to.replace(/__id__/,e));n.classes&&_.addClass(n.classes),i.append(_)};if(t.prev_text&&(s>0||t.prev_show_always)&&_(s-1,{text:t.prev_text,classes:"prev"}),e[0]>0&&t.num_edge_entries>0){for(var p=Math.min(t.num_edge_entries,e[0]),u=0;u<p;u++)_(u);t.num_edge_entries<e[0]&&t.ellipse_text&&jQuery("<span>"+t.ellipse_text+"</span>").appendTo(i)}for(u=e[0];u<e[1];u++)_(u);if(e[1]<r&&t.num_edge_entries>0){r-t.num_edge_entries>e[1]&&t.ellipse_text&&jQuery("<span>"+t.ellipse_text+"</span>").appendTo(i);for(u=Math.max(r-t.num_edge_entries,e[1]);u<r;u++)_(u)}t.next_text&&(s<r-1||t.next_show_always)&&_(s+1,{text:t.next_text,classes:"next"})}var s=t.current_page;e=!e||e<0?1:e,t.items_per_page=!t.items_per_page||t.items_per_page<0?1:t.items_per_page;var i=jQuery(this);this.selectPage=function(e){a(e)},this.prevPage=function(){return s>0&&(a(s-1),!0)},this.nextPage=function(){return s<n()-1&&(a(s+1),!0)},r(),t.callback(s,this)})};